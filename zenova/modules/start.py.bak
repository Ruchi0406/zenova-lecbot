from pyrogram import client, filters, types, enums
from zenova import zenova
import config

markup = types.InlineKeyboardMarkup([
    [types.InlineKeyboardButton("Uá´˜á´…á´€á´›á´‡s", url=config.UPDATE),
    types.InlineKeyboardButton("Sá´œá´˜á´˜á´Ê€á´›", url=config.SUPPORT)],
    [types.InlineKeyboardButton("Aá´…á´… á´á´‡ á´›á´ Êá´á´œÊ€ É¢Ê€á´á´œá´˜!", url=config.Bot_join_url)]
])

caption = '''ğŸ‘‹ Wá´‡ÊŸá´„á´á´á´‡ á´›á´ Zá´‡É´á´á´ á´€ Vá´á´›á´‡ Bá´á´›! 

  Gá´‡á´› Ê€á´‡á´€á´…Ê Ò“á´Ê€ á´‡xá´„Éªá´›ÉªÉ´É¢ Vá´á´›á´‡-Pá´ÊŸÊŸ GÉªá´ á´‡á´€á´¡á´€Ês! 

ğŸ‰ Ná´‡á´‡á´… Êœá´‡ÊŸá´˜? VÉªsÉªá´› á´á´œÊ€ sá´œá´˜á´˜á´Ê€á´› É¢Ê€á´á´œá´˜. 
EÉ´Já´Ê Êá´á´œÊ€ á´ á´á´›ÉªÉ´É¢ á´‡xá´˜á´‡Ê€Éªá´‡É´á´„á´‡! ğŸ’¬ğŸš€'''

@zenova.on_message((filters.command(["start"]) & filters.group)) 
async def start(client, message):
    await message.reply_photo(config.Start_img, caption= caption, reply_markup=markup)
    

commands_list = """
List of commands in this bot:
```python
/start - Start the bot
/help - Get help and information about the bot
/lectures - Get lectures of different subjects and teachers
/ping - Check weather bot is alive or not
```
"""

companion_bot_url = config.LEC_BOT

help_markup = types.InlineKeyboardMarkup([
    [
        types.InlineKeyboardButton("ğŸ  ğ‡á´á´á´‡", callback_data="home"),
        types.InlineKeyboardButton("ğŸ“œ ğ‚á´á´á´á´€É´á´…s", callback_data="commands")
    ],
    [
        types.InlineKeyboardButton("Uá´˜á´…á´€á´›á´‡s", url=config.UPDATE),
        types.InlineKeyboardButton("Sá´œá´˜á´˜á´Ê€á´›", url=config.SUPPORT)
    ],
    [
        types.InlineKeyboardButton("ğ‚á´á´á´˜á´€É´Éªá´É´ ğá´á´›", url=companion_bot_url)
    ]
])

@zenova.on_callback_query()
async def handle_button_click(_, query):
    if query.data == "home":
        await query.message.edit_caption(caption, reply_markup=markup)
    elif query.data == "commands":
        await query.message.edit_text(commands_list, parse_mode=enums.ParseMode.MARKDOWN, reply_markup=help_markup)

@zenova.on_message(filters.command("help"))
async def help_command(client, message):
    await message.reply_text("Hey! I am lectures uploader. Use below buttons to know more.", reply_markup=help_markup)
